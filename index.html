<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    /* Minimalistic color palette */
    :root {
      --primary: #0055a5;
      --primary-light: #e8f2ff;
      --secondary: #00a1e0;
      --bg: #f8fafc;
      --white: #ffffff;
      --gray: #4a5568;
      --light-gray: #e2e8f0;
      --border-radius: 8px;
      --shadow: 0 2px 4px rgba(0,0,0,0.05);
      --transition: all 0.2s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: var(--bg);
      color: var(--gray);
      line-height: 1.5;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
      padding: 2rem 0;
    }

    header h1 {
      font-size: 2rem;
      color: var(--primary);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    header p {
      color: var(--gray);
      font-size: 1rem;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 1.5rem;
      border: 1px solid var(--light-gray);
    }

    .card h2 {
      font-size: 1.25rem;
      color: var(--primary);
      margin-bottom: 1.5rem;
      font-weight: 600;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--light-gray);
    }

    /* Weather Section Styles */
    .weather-controls {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 1rem;
      margin-bottom: 1.5rem;
      align-items: end;
    }

    .weather-group {
      display: flex;
      flex-direction: column;
    }

    .weather-group label {
      font-size: 0.875rem;
      color: var(--gray);
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    select {
      padding: 0.75rem;
      border: 1px solid var(--light-gray);
      border-radius: var(--border-radius);
      font-size: 0.875rem;
      background: var(--white);
      color: var(--gray);
      transition: var(--transition);
    }

    select:focus {
      outline: none;
      border-color: var(--secondary);
      box-shadow: 0 0 0 3px rgba(0, 161, 224, 0.1);
    }

    .weather-btn {
      background: var(--primary);
      color: var(--white);
      border: none;
      border-radius: var(--border-radius);
      padding: 0.75rem 1.5rem;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      white-space: nowrap;
    }

    .weather-btn:hover {
      background: #004494;
    }

    .weather-display {
      background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
      color: var(--white);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      margin-top: 1rem;
      text-align: center;
    }

    .weather-card {
      text-align: center;
    }

    .weather-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .temperature {
      font-size: 2rem;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 0.25rem;
    }

    .weather-location {
      font-size: 1rem;
      color: rgba(255,255,255,0.9);
      margin-bottom: 1rem;
    }

    .weather-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
      font-size: 0.875rem;
      color: rgba(255,255,255,0.9);
      margin-top: 0.5rem;
    }

    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: var(--white);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* JSON Viewer Styles */
    .drop-zone {
      border: 2px dashed var(--light-gray);
      border-radius: var(--border-radius);
      padding: 2rem;
      text-align: center;
      margin-bottom: 1.5rem;
      cursor: pointer;
      transition: var(--transition);
      background: var(--bg);
    }

    .drop-zone:hover,
    .drop-zone.dragover {
      border-color: var(--secondary);
      background: var(--primary-light);
    }

    .drop-zone p {
      color: var(--gray);
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
    }

    .drop-zone small {
      color: var(--gray);
      font-size: 0.75rem;
      opacity: 0.7;
    }

    .json-controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      align-items: center;
    }

    .json-input {
      flex: 1;
      padding: 0.75rem;
      border: 1px solid var(--light-gray);
      border-radius: var(--border-radius);
      font-size: 0.875rem;
    }

    .json-input:focus {
      outline: none;
      border-color: var(--secondary);
    }

    .json-btn {
      background: var(--secondary);
      color: var(--white);
      border: none;
      border-radius: var(--border-radius);
      padding: 0.75rem 1.5rem;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
    }

    .json-btn:hover {
      background: #0090c7;
    }

    .json-viewer {
      background: #f8f9fa;
      border: 1px solid var(--light-gray);
      border-radius: var(--border-radius);
      padding: 1rem;
      max-height: 400px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.75rem;
      white-space: pre-wrap;
      word-break: break-all;
    }

    .json-key {
      color: #0055a5;
      font-weight: bold;
    }

    .json-string {
      color: #22863a;
    }

    .json-number {
      color: #d73a49;
    }

    .json-boolean {
      color: #6f42c1;
    }

    .json-null {
      color: #6a737d;
    }

    .error {
      background: #fee;
      border: 1px solid #fcc;
      color: #c00;
      padding: 1rem;
      border-radius: var(--border-radius);
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }

    .success {
      background: #dfd;
      border: 1px solid #afa;
      color: #080;
      padding: 1rem;
      border-radius: var(--border-radius);
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }

    .info {
      background: var(--primary-light);
      border: 1px solid var(--secondary);
      color: var(--primary);
      padding: 1rem;
      border-radius: var(--border-radius);
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }

    .location-btn {
      background: #4CAF50;
      color: var(--white);
      border: none;
      border-radius: var(--border-radius);
      padding: 0.75rem 1.5rem;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 1rem;
      width: 100%;
    }

    .location-btn:hover {
      background: #45a049;
    }

    .location-btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
    }

    .json-stats {
      font-size: 0.75rem;
      color: var(--gray);
      margin-bottom: 1rem;
      padding: 0.5rem;
      background: rgba(0,0,0,0.03);
      border-radius: 4px;
    }

    .toggle-btn {
      background: var(--primary);
      color: var(--white);
      border: none;
      border-radius: var(--border-radius);
      padding: 0.5rem 1rem;
      font-size: 0.75rem;
      cursor: pointer;
      margin-left: 0.5rem;
    }

    footer {
      text-align: center;
      margin-top: 2rem;
      padding: 1.5rem;
      color: var(--gray);
      font-size: 0.75rem;
      border-top: 1px solid var(--light-gray);
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <p>Tarkastele s√§√§t√§ ja JSON-tiedostoja</p>
    </header>

    <main>
      <div class="dashboard-grid">
        <!-- Weather Section -->
        <section class="card">
          <h2>S√§√§n haku</h2>
          
          <div class="weather-controls">
            <div class="weather-group">
              <label for="countrySelect">Maa</label>
              <select id="countrySelect">
                <option value="">Valitse maa...</option>
                <option value="finland">Suomi</option>
                <option value="sweden">Ruotsi</option>
                <option value="norway">Norja</option>
                <option value="denmark">Tanska</option>
                <option value="germany">Saksa</option>
                <option value="france">Ranska</option>
                <option value="spain">Espanja</option>
                <option value="italy">Italia</option>
                <option value="uk">Iso-Britannia</option>
                <option value="usa">USA</option>
                <option value="canada">Kanada</option>
                <option value="japan">Japani</option>
                <option value="australia">Australia</option>
              </select>
            </div>
            
            <div class="weather-group">
              <label for="citySelect">Kaupunki</label>
              <select id="citySelect" disabled>
                <option value="">Valitse ensin maa</option>
              </select>
            </div>
            
            <button class="weather-btn" onclick="fetchWeather()">Hae s√§√§</button>
          </div>
          
          <div id="weatherResults" class="weather-display">
            <div class="weather-card">
              <div class="weather-icon">üå§Ô∏è</div>
              <div class="temperature">- ¬∞C</div>
              <div class="weather-location">Valitse maa ja kaupunki</div>
              <div class="weather-details">
                <div>Tuuli: -</div>
                <div>Kosteus: -</div>
              </div>
            </div>
          </div>

          <button class="location-btn" onclick="getDeviceLocation()">
            N√§yt√§ nykyisen sijainnin s√§√§
          </button>

          <div id="currentLocationWeather" style="display: none;">
            <!-- Device location weather will appear here -->
          </div>
        </section>

        <!-- JSON Viewer Section -->
        <section class="card">
          <h2>Tarkista JSON-tiedostoja</h2>
          
          <div class="drop-zone" id="dropZone">
            <p>Ved√§ ja pudota JSON-tiedosto</p>
            <small>Tai valitse tiedosto</small>
            <input type="file" id="fileInput" accept=".json" style="display: none;">
          </div>

        

          <div id="jsonStats" class="json-stats">
            Ei ladattua JSON-tiedostoa
          </div>

          <div id="jsonViewer" class="json-viewer">
            Lataa tiedosto ja tiedot n√§kyv√§t t√§ss√§
          </div>

          <div class="json-controls" style="justify-content: space-between; margin-top: 1rem;">
            <button class="json-btn" onclick="copyJSON()" style="background: #666;">Kopioi</button>
            <button class="json-btn" onclick="downloadJSON()" style="background: #666;">Lataa</button>
            <button class="json-btn" onclick="clearJSON()" style="background: #dc3545;">Tyhjenn√§</button>
          </div>
        </section>
      </div>
    </main>


  </div>

  <script>
    // Country and city database
    const countryDatabase = {
      "finland": {
        name: "Suomi",
        cities: {
          "Helsinki": { lat: 60.1699, lon: 24.9384 },
          "Tampere": { lat: 61.4978, lon: 23.7610 },
          "Turku": { lat: 60.4518, lon: 22.2666 },
          "Oulu": { lat: 65.0121, lon: 25.4651 },
          "Rovaniemi": { lat: 66.5039, lon: 25.7294 }
        }
      },
      "sweden": {
        name: "Ruotsi",
        cities: {
          "Tukholma": { lat: 59.3293, lon: 18.0686 },
          "G√∂teborg": { lat: 57.7089, lon: 11.9746 },
          "Malm√∂": { lat: 55.6050, lon: 13.0038 }
        }
      },
      "norway": {
        name: "Norja",
        cities: {
          "Oslo": { lat: 59.9139, lon: 10.7522 },
          "Bergen": { lat: 60.3913, lon: 5.3221 },
          "Trondheim": { lat: 63.4305, lon: 10.3951 }
        }
      },
      "denmark": {
        name: "Tanska",
        cities: {
          "K√∂√∂penhamina": { lat: 55.6761, lon: 12.5683 },
          "Aarhus": { lat: 56.1629, lon: 10.2039 }
        }
      },
      "germany": {
        name: "Saksa",
        cities: {
          "Berliini": { lat: 52.5200, lon: 13.4050 },
          "M√ºnchen": { lat: 48.1351, lon: 11.5820 },
          "Hampuri": { lat: 53.5511, lon: 9.9937 }
        }
      },
      "france": {
        name: "Ranska",
        cities: {
          "Pariisi": { lat: 48.8566, lon: 2.3522 },
          "Marseille": { lat: 43.2965, lon: 5.3698 },
          "Lyon": { lat: 45.7640, lon: 4.8357 }
        }
      },
      "spain": {
        name: "Espanja",
        cities: {
          "Madrid": { lat: 40.4168, lon: -3.7038 },
          "Barcelona": { lat: 41.3851, lon: 2.1734 },
          "Sevilla": { lat: 37.3891, lon: -5.9845 }
        }
      },
      "italy": {
        name: "Italia",
        cities: {
          "Rooma": { lat: 41.9028, lon: 12.4964 },
          "Milano": { lat: 45.4642, lon: 9.1900 },
          "Venetsia": { lat: 45.4408, lon: 12.3155 }
        }
      },
      "uk": {
        name: "Iso-Britannia",
        cities: {
          "Lontoo": { lat: 51.5074, lon: -0.1278 },
          "Manchester": { lat: 53.4808, lon: -2.2426 }
        }
      },
      "usa": {
        name: "USA",
        cities: {
          "New York": { lat: 40.7128, lon: -74.0060 },
          "Los Angeles": { lat: 34.0522, lon: -118.2437 },
          "Chicago": { lat: 41.8781, lon: -87.6298 }
        }
      },
      "canada": {
        name: "Kanada",
        cities: {
          "Toronto": { lat: 43.6532, lon: -79.3832 },
          "Vancouver": { lat: 49.2827, lon: -123.1207 }
        }
      },
      "japan": {
        name: "Japani",
        cities: {
          "Tokio": { lat: 35.6762, lon: 139.6503 },
          "Osaka": { lat: 34.6937, lon: 135.5023 }
        }
      },
      "australia": {
        name: "Australia",
        cities: {
          "Sydney": { lat: -33.8688, lon: 151.2093 },
          "Melbourne": { lat: -37.8136, lon: 144.9631 }
        }
      }
    };

    // Current loaded JSON data
    let currentJSONData = null;

    // DOM Elements
    const countrySelect = document.getElementById('countrySelect');
    const citySelect = document.getElementById('citySelect');
    const weatherResults = document.getElementById('weatherResults');
    const currentLocationWeather = document.getElementById('currentLocationWeather');
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('fileInput');
    const jsonUrlInput = document.getElementById('jsonUrl');
    const jsonViewer = document.getElementById('jsonViewer');
    const jsonStats = document.getElementById('jsonStats');

    // Initialize country selection
    countrySelect.addEventListener('change', function() {
      const countryId = this.value;
      citySelect.disabled = !countryId;
      
      // Clear previous city selection
      citySelect.innerHTML = '<option value="">Valitse kaupunki</option>';
      
      if (countryId && countryDatabase[countryId]) {
        // Add cities for selected country
        Object.keys(countryDatabase[countryId].cities).forEach(city => {
          const option = document.createElement('option');
          option.value = city;
          option.textContent = city;
          citySelect.appendChild(option);
        });
      }
    });

    // Set default values
    countrySelect.value = 'finland';
    countrySelect.dispatchEvent(new Event('change'));
    setTimeout(() => {
      citySelect.value = 'Helsinki';
    }, 100);

    // Weather fetching function
    async function fetchWeather() {
      const countryId = countrySelect.value;
      const city = citySelect.value;
      
      if (!countryId || !city) {
        showMessage(weatherResults, 'Valitse maa ja kaupunki', 'error');
        return;
      }
      
      const location = countryDatabase[countryId].cities[city];
      
      if (!location) {
        showMessage(weatherResults, 'Kaupungin koordinaatteja ei l√∂ytynyt', 'error');
        return;
      }
      
      // Show loading
      weatherResults.innerHTML = `
        <div class="weather-card">
          <div class="weather-icon"><span class="loading"></span></div>
          <div class="temperature">Ladataan...</div>
          <div class="weather-location">${city}, ${countryDatabase[countryId].name}</div>
        </div>
      `;
      
      try {
        const weatherData = await getWeatherData(location.lat, location.lon);
        displayWeather(weatherResults, city, countryDatabase[countryId].name, weatherData);
      } catch (error) {
        showMessage(weatherResults, 'S√§√§tietojen haku ep√§onnistui', 'error');
      }
    }

    // Get device location weather
    function getDeviceLocation() {
      const button = document.querySelector('.location-btn');
      const originalText = button.textContent;
      button.textContent = 'Haetaan sijaintia...';
      button.disabled = true;
      
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          async (position) => {
            try {
              const weatherData = await getWeatherData(position.coords.latitude, position.coords.longitude);
              const cityName = await getCityName(position.coords.latitude, position.coords.longitude);
              
              // Show in main weather display
              displayWeather(weatherResults, cityName, 'Nykyinen sijainti', weatherData);
              
              // Also show in separate section
              displayWeather(currentLocationWeather, cityName, 'Laitteen sijainti', weatherData);
              currentLocationWeather.style.display = 'block';
              
              button.textContent = originalText;
              button.disabled = false;
            } catch (error) {
              showMessage(weatherResults, 'S√§√§tietojen haku ep√§onnistui', 'error');
              button.textContent = originalText;
              button.disabled = false;
            }
          },
          (error) => {
            showMessage(weatherResults, `Sijaintitietojen haku ep√§onnistui: ${error.message}`, 'error');
            button.textContent = originalText;
            button.disabled = false;
          }
        );
      } else {
        showMessage(weatherResults, 'Sijaintituki ei ole saatavilla selaimessasi', 'error');
        button.textContent = originalText;
        button.disabled = false;
      }
    }

    // Get city name from coordinates
    async function getCityName(lat, lon) {
      try {
        const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&zoom=10`);
        const data = await response.json();
        return data.address.city || data.address.town || data.address.village || data.address.municipality || 'Tuntematon sijainti';
      } catch (error) {
        return 'Nykyinen sijainti';
      }
    }

    // Get weather data
    async function getWeatherData(lat, lon) {
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=relativehumidity_2m&timezone=auto`;
      
      const response = await fetch(url);
      if (!response.ok) throw new Error('API error');
      return await response.json();
    }

    // Display weather
    function displayWeather(element, city, country, weatherData) {
      const current = weatherData.current_weather;
      const icon = getWeatherIcon(current.weathercode);
      const temp = Math.round(current.temperature);
      const humidity = weatherData.hourly ? weatherData.hourly.relativehumidity_2m[0] : '?';
      const windSpeed = Math.round(current.windspeed * 3.6); // Convert to km/h
      
      element.innerHTML = `
        <div class="weather-card">
          <div class="weather-icon">${icon}</div>
          <div class="temperature">${temp}¬∞C</div>
          <div class="weather-location">${city}, ${country}</div>
          <div class="weather-details">
            <div>Tuuli: ${windSpeed} km/h</div>
            <div>Kosteus: ${humidity}%</div>
          </div>
        </div>
      `;
    }

    // Weather icon helper
    function getWeatherIcon(code) {
      if (code === 0) return "‚òÄÔ∏è";
      if (code <= 3) return "üå§Ô∏è";
      if (code <= 48) return "üå´Ô∏è";
      if (code <= 67) return "üåßÔ∏è";
      if (code <= 77) return "‚ùÑÔ∏è";
      if (code <= 99) return "‚õàÔ∏è";
      return "üå§Ô∏è";
    }

    // Show message
    function showMessage(element, message, type) {
      element.innerHTML = `
        <div class="${type}">
          ${message}
        </div>
      `;
    }

    // JSON File Drag & Drop
    dropZone.addEventListener('click', () => fileInput.click());
    
    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        loadJSONFile(file);
      }
    });

    // Drag and drop events
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    ['dragenter', 'dragover'].forEach(eventName => {
      dropZone.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, unhighlight, false);
    });

    function highlight() {
      dropZone.classList.add('dragover');
    }

    function unhighlight() {
      dropZone.classList.remove('dragover');
    }

    dropZone.addEventListener('drop', (e) => {
      const dt = e.dataTransfer;
      const file = dt.files[0];
      if (file && file.name.endsWith('.json')) {
        loadJSONFile(file);
      } else {
        showJSONMessage('Vain JSON-tiedostot ovat sallittuja', 'error');
      }
    });

    // Load JSON from file
    function loadJSONFile(file) {
      const reader = new FileReader();
      
      reader.onload = function(e) {
        try {
          const jsonData = JSON.parse(e.target.result);
          processJSONData(jsonData, file.name);
        } catch (error) {
          showJSONMessage(`Virhe JSON-tiedoston k√§sittelyss√§: ${error.message}`, 'error');
        }
      };
      
      reader.onerror = function() {
        showJSONMessage('Virhe tiedoston lukemisessa', 'error');
      };
      
      reader.readAsText(file);
    }

    // Load JSON from URL
    async function loadJSONFromURL() {
      const url = jsonUrlInput.value.trim();
      
      if (!url) {
        showJSONMessage('Sy√∂t√§ JSON-tiedoston URL', 'error');
        return;
      }
      
      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('URL haku ep√§onnistui');
        
        const jsonData = await response.json();
        processJSONData(jsonData, `URL: ${url}`);
      } catch (error) {
        showJSONMessage(`Virhe URL:n latauksessa: ${error.message}`, 'error');
      }
    }

    // Process JSON data
    function processJSONData(jsonData, source) {
      currentJSONData = jsonData;
      
      // Display formatted JSON
      displayFormattedJSON(jsonData);
      
      // Update stats
      updateJSONStats(jsonData, source);
      
      showJSONMessage(`JSON-tiedosto ladattu onnistuneesti: ${source}`, 'success');
    }

    // Display formatted JSON with syntax highlighting
    function displayFormattedJSON(data) {
      const jsonString = JSON.stringify(data, null, 2);
      let html = jsonString;
      
      // Simple syntax highlighting
      html = html.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?)/g, (match) => {
        let cls = 'json-number';
        if (/^"/.test(match)) {
          if (/:$/.test(match)) {
            cls = 'json-key';
          } else {
            cls = 'json-string';
          }
        } else if (/true|false/.test(match)) {
          cls = 'json-boolean';
        } else if (/null/.test(match)) {
          cls = 'json-null';
        }
        return `<span class="${cls}">${match}</span>`;
      });
      
      jsonViewer.innerHTML = html;
    }

    // Update JSON stats
    function updateJSONStats(data, source) {
      const dataType = Array.isArray(data) ? 'Array' : 'Object';
      const size = new Blob([JSON.stringify(data)]).size;
      const sizeKB = (size / 1024).toFixed(2);
      
      let itemCount = 0;
      if (Array.isArray(data)) {
        itemCount = data.length;
      } else if (typeof data === 'object') {
        itemCount = Object.keys(data).length;
      }
      
      jsonStats.innerHTML = `
        <strong>JSON-tiedoston tiedot:</strong><br>
        L√§hde: ${source}<br>
        Tyyppi: ${dataType}<br>
        Koko: ${sizeKB} KB<br>
        ${itemCount > 0 ? `Kohteita: ${itemCount}` : ''}
      `;
    }

    // Show JSON message
    function showJSONMessage(message, type) {
      const messageDiv = document.createElement('div');
      messageDiv.className = type;
      messageDiv.innerHTML = message;
      messageDiv.style.marginBottom = '1rem';
      
      jsonStats.parentNode.insertBefore(messageDiv, jsonStats);
      
      // Remove message after 5 seconds
      setTimeout(() => {
        if (messageDiv.parentNode) {
          messageDiv.parentNode.removeChild(messageDiv);
        }
      }, 5000);
    }

    // Copy JSON to clipboard
    function copyJSON() {
      if (!currentJSONData) {
        showJSONMessage('Ei kopioitavaa JSON-dataa', 'error');
        return;
      }
      
      const jsonString = JSON.stringify(currentJSONData, null, 2);
      navigator.clipboard.writeText(jsonString).then(() => {
        showJSONMessage('JSON kopioitu leikep√∂yd√§lle', 'success');
      }).catch(err => {
        showJSONMessage('Kopiointi ep√§onnistui', 'error');
      });
    }

    // Download JSON
    function downloadJSON() {
      if (!currentJSONData) {
        showJSONMessage('Ei ladattavaa JSON-dataa', 'error');
        return;
      }
      
      const jsonString = JSON.stringify(currentJSONData, null, 2);
      const blob = new Blob([jsonString], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'data.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // Clear JSON
    function clearJSON() {
      currentJSONData = null;
      jsonViewer.innerHTML = 'Lataa JSON-tiedosto n√§hd√§ksesi sis√§ll√∂n...';
      jsonStats.innerHTML = 'Ei ladattua JSON-tiedostoa';
      jsonUrlInput.value = '';
      fileInput.value = '';
    }

    // Example JSON URLs for quick testing
    const exampleURLs = [
      'https://jsonplaceholder.typicode.com/posts',
      'https://jsonplaceholder.typicode.com/users',
      'https://raw.githubusercontent.com/jdorfman/awesome-json-datasets/master/package.json'
    ];

    // Set first example URL as placeholder
    jsonUrlInput.placeholder = `Tai sy√∂t√§ JSON-URL (esim. ${exampleURLs[0]})`;

  </script>
</body>
</html>